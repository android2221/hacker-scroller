(this["webpackJsonphacker-scroller"]=this["webpackJsonphacker-scroller"]||[]).push([[0],{18:function(t,e,s){},22:function(t,e,s){},24:function(t,e,s){},31:function(t,e,s){},33:function(t,e,s){"use strict";s.r(e);var n=s(1),r=s.n(n),c=s(10),a=s.n(c),o=(s(18),s(13)),i=s(12),l=s(2),u=s.n(l),h=s(3),d=s(4),p=s(5),m=s(7),j=s(6),b=s(9),f=s.n(b),v=s(11),x=s.n(v),O=(s(22),s(0)),y=function(t){Object(m.a)(s,t);var e=Object(j.a)(s);function s(){return Object(d.a)(this,s),e.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"hacker-card "+this.props.story.type,children:[Object(O.jsx)("h2",{className:"story-title",children:Object(O.jsx)("a",{href:this.props.calculatedUrl,children:this.props.story.title})}),Object(O.jsx)("div",{className:"story-url",children:this.props.displayUrl}),Object(O.jsxs)("div",{className:"points-info",children:[Object(O.jsxs)("span",{children:[this.props.story.score," points by ",this.props.story.by," "]}),Object(O.jsxs)("span",{id:"comment-count",children:["| ",this.props.story.descendants?this.props.story.descendants:0," comments"]}),Object(O.jsxs)("span",{children:[" | ",Object(O.jsx)(x.a,{unix:!0,fromNow:!0,children:this.props.story.time})]})]}),"job"!==this.props.story.type&&Object(O.jsxs)("div",{className:"top-comments",children:[void 0!==this.props.topComments&&this.props.topComments.length>0?Object(O.jsx)("h3",{children:"Top Comments"}):"",void 0!==this.props.topComments&&this.props.topComments.length>0?this.props.topComments.map((function(t,e){return Object(O.jsxs)("div",{className:"comment",children:[Object(O.jsxs)("div",{className:"comment-by",children:[t.by," said:"]}),Object(O.jsx)("div",{className:"comment-text",dangerouslySetInnerHTML:{__html:t.text}})]},e)})):Object(O.jsx)("div",{className:"no-comments",children:"No comments yet"})]}),"job"!==this.props.story.type&&Object(O.jsx)("div",{className:"see-on-hn-overlay",children:Object(O.jsx)("div",{className:"see-on-hn",children:Object(O.jsx)("a",{href:this.props.hnUrl,children:"Read on HN"})})})]},this.props.index)}}]),s}(n.Component),g=(s(24),function(t){Object(m.a)(s,t);var e=Object(j.a)(s);function s(){var t;return Object(d.a)(this,s),(t=e.call(this)).trackScrolling=Object(h.a)(u.a.mark((function e(){var s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=document.getElementById("bottom-element"),!t.isBottom(s)){e.next=7;break}if(t.state.loading){e.next=7;break}return e.next=5,t.getData();case 5:n=e.sent,t.setState(n);case 7:case"end":return e.stop()}}),e)}))),t.state={topStories:[],storyData:[],currentStoriesSlice:[],currentOffset:10,storiesToLoad:10,loading:!0},t.mounted=!1,t.hnBaseUrl="https://hacker-news.firebaseio.com/v0/",t}return Object(p.a)(s,[{key:"componentDidMount",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mounted=!0,!this.mounted){t.next=7;break}return t.next=4,this.getData();case 4:e=t.sent,this.setState(e),document.addEventListener("scroll",this.trackScrolling);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.trackScrolling)}},{key:"getData",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,s,n,r,c,a,o,l,d,p=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==this.state.loading&&this.setState({loading:!0}),e=this.state.currentOffset-this.state.storiesToLoad,s={},0!==this.state.topStories.length){t.next=15;break}return t.next=6,fetch("".concat(this.hnBaseUrl,"topstories.json"));case 6:return n=t.sent,t.next=9,n.json();case 9:r=t.sent,c=r.slice(e,this.state.currentOffset),s.topStories=r,s.currentStoriesSlice=c,t.next=17;break;case 15:s.topStories=this.state.topStories,s.currentStoriesSlice=s.topStories.slice(e,this.state.currentOffset);case 17:return a=[],t.next=20,Promise.all(s.currentStoriesSlice.map(function(){var t=Object(h.a)(u.a.mark((function t(e){var s,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.hnBaseUrl,"item/").concat(e,".json"));case 2:return s=t.sent,t.next=5,s.json();case 5:if(!(n=t.sent).kids){t.next=10;break}return t.next=9,Promise.all(n.kids.slice(0,10).map(function(){var t=Object(h.a)(u.a.mark((function t(e){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.hnBaseUrl,"item/").concat(e,".json"));case 2:return s=t.sent,t.next=5,s.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 9:a=t.sent;case 10:return r=[],a.length>0&&a.forEach((function(t){null===t||void 0===t||"deleted"in t&&!0===t.deleted||r.push(t)})),t.abrupt("return",{story:n,topComments:r});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 20:return o=t.sent,(l=Object.assign([],this.state.storyData)).push.apply(l,Object(i.a)(o)),d=this.state.currentOffset+this.state.storiesToLoad,t.abrupt("return",{topStories:s.topStories,currentStoriesSlice:s.currentStoriesSlice,storyData:l,currentOffset:d,loading:!1});case 25:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"createHackerCards",value:function(){if(void 0!==this.state.storyData&&this.state.storyData.length>0)var t=this.state.storyData.map((function(t,e){var s,n,r=t.story,c=t.topComments,a="https://news.ycombinator.com/item?id=".concat(r.id);if(r.url){var i=r.url.split("/");s=r.url,n=i[2]}else n="news.ycombinator.com",s=a;var l={story:r,calculatedUrl:s,displayUrl:n,hnUrl:a,storyKey:e,topComments:c};return Object(O.jsx)(y,Object(o.a)({},l),e)}));return t}},{key:"isBottom",value:function(t){return t.getBoundingClientRect().bottom<=window.innerHeight+1}},{key:"render",value:function(){var t=this.createHackerCards();return void 0!==t&&t.length>0?Object(O.jsxs)("div",{className:"scroller-container",children:[t,Object(O.jsx)("div",{id:"bottom-element"}),Object(O.jsx)("div",{id:"loading-icon-container",children:Object(O.jsx)("div",{id:"loading-icon",className:"loading",children:Object(O.jsx)(f.a,{size:35,color:"black",loading:this.state.loading})})})]}):Object(O.jsx)("div",{id:"loading-icon",className:"loading",children:Object(O.jsx)(f.a,{size:35,color:"black",loading:this.state.loading})})}}]),s}(n.Component));s(31);var k=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)("div",{id:"header",children:[Object(O.jsx)("div",{className:"site-name",children:"Hacker Scroller"}),Object(O.jsx)("div",{className:"about",children:Object(O.jsx)("a",{href:"https://github.com/android2221/hacker-scroller",children:"GitHub Project"})})]}),Object(O.jsx)(g,{})]})},S=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,34)).then((function(e){var s=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,a=e.getTTFB;s(t),n(t),r(t),c(t),a(t)}))};a.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(k,{})}),document.getElementById("root")),S()}},[[33,1,2]]]);
//# sourceMappingURL=main.201804d0.chunk.js.map